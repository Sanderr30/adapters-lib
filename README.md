# Adapters Library — Потоковая обработка данных на C++

## Описание

Этот проект — моя библиотека адаптеров, упрощающая работу с алгоритмами, контейнерами и файлами в стиле конвейерной (pipeline) обработки.
Идея в том, чтобы связать набор адаптеров в цепочку и элегантно решать типовые задачи обработки данных с минимальным кодом.

Библиотека поддерживает ленивые вычисления: данные обрабатываются по мере запроса, а промежуточные объекты не владеют массивами данных. Такой подход близок к `std::string_view`, `std::span` и концепции `ranges`.

## Пример использования

Пример подсчёта частотности слов во всех `.txt` файлах директории:

```cpp
Dir(argv[1], recursive) 
    | Filter([](std::filesystem::path& p){ return p.extension() == ".txt"; })
    | OpenFiles()
    | Split("\n ,.;")
    | Transform(
        [](std::string& token) { 
            std::transform(token.begin(), token.end(), token.begin(), [](char c){return std::tolower(c);});
            return token;
        })
    | AggregateByKey(
        0uz, 
        [](const std::string&, size_t& count) { ++count;},
        [](const std::string& token) { return token;}
      )
    | Transform([](const std::pair<std::string, size_t>& stat) { return std::format("{} - {}", stat.first, stat.second);})
    | Out(std::cout);
```

## Реализованные адаптеры

* **Dir** — получает список файлов в директории (с опцией рекурсивного обхода).
* **OpenFiles** — открывает файловый поток для каждого пути.
* **Split** — разделяет входные данные по переданным разделителям.
* **Out** — выводит данные в поток.
* **AsDataFlow** — преобразует контейнер в поток данных.
* **Transform** — применяет функцию к каждому элементу.
* **Filter** — фильтрация элементов по предикату.
* **Write** — записывает данные в поток с разделителем.
* **AsVector** — собирает результаты в `std::vector`.
* **Join** — объединение двух потоков по ключу (аналог LEFT JOIN в SQL).
* **KV** — структура ключ-значение для объединений.
* **JoinResult** — результат объединения с данными из обоих потоков.
* **DropNullopt** — фильтрация `std::optional` от пустых значений.
* **SplitExpected** — разделение потока `expected` на успешные и ошибочные значения.
* **AggregateByKey** — агрегация элементов по ключу (не ленивый адаптер).

## Тестирование

Проект покрыт тестами с использованием [Google Test](https://google.github.io/googletest).

## Цель проекта

Главная цель — реализовать удобную библиотеку адаптеров для потоковой обработки данных, вдохновлённую `std::ranges`, но написанную полностью с нуля.
